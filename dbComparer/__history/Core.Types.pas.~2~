unit Core.Types;

interface

uses System.Classes, Generics.Collections, system.SysUtils;

type
  TColumnInfo = record
    ColumnName: string;
    DataType: string;
    IsNullable: string;
    ColumnKey: string;
    Extra: string;
    ColumnDefault: string;
    CharMaxLength: string;
    ColumnComment: string;
  end;

  TIndexColumn = record
    ColumnName: string;
    SeqInIndex: Integer;
  end;

  TIndexInfo = record
    IndexName: string;
    IsUnique: Boolean;
    IsPrimary: Boolean;
    Columns: TArray<TIndexColumn>;
  end;

  TTriggerInfo = record
    TriggerName: string;
    EventManipulation: string;
    ActionTiming: string;
    ActionStatement: string;
    EventObjectTable: string;
  end;

  TTableInfo = class
    TableName: string;
    Columns: TList<TColumnInfo>;
    constructor Create;
    destructor Destroy; override;
  end;

TComparerOptions = class
  public
    NoDelete: Boolean;
    WithTriggers: Boolean;
    WithData: Boolean;
    WithDataDiff: Boolean;
    ExcludeTables: TStringList;
    IncludeTables: TStringList;

    constructor Create;
    destructor Destroy; override;

    // MÉTODO ELEGANTE: La clase sabe cómo crearse a sí misma desde la consola
    class function ParseFromCLI: TComparerOptions;
  end;

implementation

{ TTableInfo }
constructor TTableInfo.Create;
begin
  Columns := TList<TColumnInfo>.Create;
end;

destructor TTableInfo.Destroy;
begin
  Columns.Free;
  inherited;
end;

{ TComparerOptions }

constructor TComparerOptions.Create;
begin
//
end;

destructor TComparerOptions.Destroy;
begin
  //
  inherited;
end;

class function TComparerOptions.ParseFromCLI: TComparerOptions;
begin
  //
end;

end.